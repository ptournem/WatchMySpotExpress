<!DOCTYPE html>
<html>
  <head>
    <%- include layout-header %>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
  </head>
  <body>
    <%- include layout-menu %>

    <div class="row center">
      <h5 class="header col s12 light"><%= application %></h5>
    </div>
    <div class="container">
      <div class="section">
        <!--   Icon Section   -->
        <div class="row">
            <div class="row center">
              <h5 class="header col s12 light">Nos 10 meilleurs spots</h5>
            </div>
          <div class="col s12 m12">
            <div class="icon-block">
              <div id="mapId" style="height: 500px;"></div>
            </div>
          </div>
          <% locations.forEach(function (location) { %>
            <div class="col s12 m4">
              <div class="icon-block">
                <h2 class="center light-blue-text"><%= location.nom %></h2>
                <h5 class="center"><%= location.note %> / 10</h5>
              </div>
            </div>
          <% }); %>
        </div>
      </div>
      <br><br>
    </div>

    <%- include layout-footer %>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
    integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
    crossorigin=""></script>
    <script type="text/javascript">
      var myMap = L.map('mapId').setView([46.495, 2.207], 5);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(myMap);

      <% locations.forEach(function (location) { %>
        L.marker([<%= location.latitude %>, <%= location.longitude %>]).addTo(myMap)
        .bindPopup('Note : ' + <%= location.note %> + '/10');
      <% }); %>
    </script>
  </body>
</html>
